!function(){"use strict";function filtRepeatNode(nodeData){function mapChildFindRepeat(node,tier){for(var i=0;i<node.childNodes.length;i++)if(node.childNodes[i].attributes){for(var n=0;n<node.childNodes[i].attributes.length;n++)if(node.childNodes[i].attributes[n].nodeName&&"mvc-repeat"==node.childNodes[i].attributes[n].nodeName){var tierRegExp=new RegExp("\\$"+tier,"g"),tempRepeat={repeatMark:node.childNodes[i].attributes[n].nodeValue,repeatHTML:node.childNodes[i].innerHTML,repeatTier:tier};nodeData.nodeRepeats.push(tempRepeat);var repeatTimes=0,compileHTML="";if("object"==eval("typeof("+tempRepeat.repeatMark+")"))for(repeatTimes;repeatTimes<eval(tempRepeat.repeatMark+".length");repeatTimes++){var tempHTML=tempRepeat.repeatHTML;tempHTML=tempHTML.replace(tierRegExp,repeatTimes),compileHTML+=tempHTML}else $mvc.debug?console.warn(tempRepeat.repeatMark+" is not Array!"):null;node.childNodes[i].innerHTML=compileHTML,mapChildFindRepeat(node.childNodes[i],tier+1);break}n==node.childNodes[i].attributes.length&&mapChildFindRepeat(node.childNodes[i],tier)}}return mapChildFindRepeat(nodeData.node,0),nodeData}function filtNodeMarks(e){return e.nodeMarks=e.node.innerHTML.match($mvc.regex.NodeMark)||[],e}function compileNodeMarks(nodeData){for(var htmlStr=nodeData.node.innerHTML,mapedMarks=nodeData.nodeMarks,tempMark,i=0;i<mapedMarks.length;i++)tempMark=mapedMarks[i].replace(/({{)/g,""),tempMark=tempMark.replace(/(}})/g,""),tempMark=tempMark.replace(/^(="")/g,""),htmlStr="undefined"!=eval("typeof("+tempMark+")")?htmlStr.replace(mapedMarks[i],eval(tempMark)):htmlStr.replace(mapedMarks[i],"");return nodeData.node.innerHTML=htmlStr,nodeData}window.$mvc=window.$mvc||{name:"MVC9",version:"1.0.1",mode:"dev"},$mvc.console=function(e,n,o){if("dev"==$mvc.mode)if(console.time)switch(e){case"time":console.time(n);break;case"timeEnd":console.timeEnd(n);break;case"group":o=o||"#000",console.group("%c"+n,"color:"+o);break;case"groupEnd":console.groupEnd(n);break;case"log":o=o||"#555",console.log("%c"+n,"color:"+o);break;case"warn":o=o||"f96",console.warn("%c"+n,"color"+o)}else switch(e){case"log":console.log(n);break;case"warn":console.warn(n);break;case"error":console.error(n)}},$mvc.onload=function(e){window.onload=function(){e()}},$mvc.regex={},$mvc.regex.NodeMark=new RegExp("{{[^(}})]*}}","g"),$mvc.mapNode={},$mvc.mapNode.model=function(e){return e=e||document.body,$mvc.mapNode.memoryNode={node:e,nodeMarks:[],nodeRepeats:[],sourceHTML:e.innerHTML},$mvc.mapNode.memoryNode},$mvc.mapNode.restore=function(e){return e.nodeMarks=[],e.nodeRepeats=[],e.node.innerHTML=e.sourceHTML,e},$mvc.mapNode.compile=function(e){return e=e||$mvc.mapNode.memoryNode,$mvc.console("group","$mvc compile"),$mvc.console("log","Model Element LocalName : "+e.node.localName),e.node.id?$mvc.console("log","Model Element Id : "+e.node.id):null,e.node.className?$mvc.console("log","Model Element Class : "+e.node.className):null,$mvc.console("time","Elapsed Time"),$mvc.mapNode.restore(e),e=filtRepeatNode(e),e=filtNodeMarks(e),e=compileNodeMarks(e),$mvc.mapNode.memoryNode=e,$mvc.console("timeEnd","Elapsed Time"),$mvc.console("groupEnd","$mvc compile"),e},$mvc.sAjaxSequence=[],$mvc.sAjax=function(e){function n(){if(4==r.readyState){for(var n=0;n<$mvc.sAjaxSequence.length;n++)setTimeout(function(){$mvc.sAjaxSequence=$mvc.sAjaxSequence.slice(0,n-1).concat($mvc.sAjaxSequence.slice(n,$mvc.sAjaxSequence.length-1))},e.delay);e.finishCallback(r.status,r.responseText)}}function o(){var e=null;try{e=new XMLHttpRequest}catch(n){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}if(e={name:e.name||"null",crackCallback:e.crackCallback||function(e){console.warn("sAjax(name:"+e+") is canceled because of an unfinished same sAjax!")},url:e.url||window.location.href,method:e.method||"GET",header:e.header||[],contentType:e.contentType||"application/x-www-form-urlencoded",content:e.content||"",async:!!e.async||!0,delay:e.delay||100,finishCallback:e.finishCallback||function(){}},e.header.push({name:"Content-Type",value:e.contentType}),e.contentType.match(/application\/x-www-form-urlencoded/g)){if(e.header.push({name:"X-Requested-With",value:"XMLHttpRequest"}),"object"==typeof e.content){var a="";for(var t in e.content)a=a?a+"&"+encodeURIComponent(t)+"="+encodeURIComponent(e.content[t]):encodeURIComponent(t)+"="+encodeURIComponent(e.content[t]);e.content=a}}else JSON&&"object"==typeof e.content&&(e.content=JSON.stringify(e.content));if(!e.name)return void console.error("$mvc.sAjax param.name can not be omitted!");for(var c=0;c<$mvc.sAjaxSequence.length;c++)if($mvc.sAjaxSequence[c]==e.name)return void e.crackCallback(e.name);$mvc.sAjaxSequence.push(e.name);var r=null;if(r=o(),null==r)return void alert("Your brower dose not support AJAX!");r.onreadystatechange=n,r.open(e.method,e.url,e.async);for(var d=0;d<e.header.length;d++)r.setRequestHeader(e.header[d].name,e.header[d].value);return r.send(e.content),e}}();